@page "/Admin"
@using WorkFlowClient.Components.AdminComponents
@inject WorkFlowClient.Services.Class.LangState Lang
<div class="admin-container">
    <header class="admin-header">
        <h2>@Lang.T("admin")</h2>
    </header>

    <nav class="admin-nav">
        <button @onclick="() => SetActiveTab(AdminTabs.UsersRequst)"
                class="nav-btn @(activeTab == AdminTabs.UsersRequst ? "active" : "")">
            <span class="icon">&#128100;</span>
            <span class="text">@Lang.T("usersRequests")</span>
        </button>

        <button @onclick="() => SetActiveTab(AdminTabs.ShiftsRequst)"
                class="nav-btn @(activeTab == AdminTabs.ShiftsRequst ? "active" : "")">
            <span class="icon">&#128197;</span>
            <span class="text">@Lang.T("shiftsRequests")</span>
        </button>

        <button @onclick="() => SetActiveTab(AdminTabs.UserMangment)"
                class="nav-btn @(activeTab == AdminTabs.UserMangment ? "active" : "")">
            <span class="icon">&#128247;</span>
            <span class="text">@Lang.T("userManagement")</span>
        </button>
    </nav>

    <main class="admin-content animate-fade-in">
        @if (activeTab == AdminTabs.UsersRequst)
        {
            <UsersRequst />
        }
        else if (activeTab == AdminTabs.ShiftsRequst)
        {
            <ShiftsRequst UserId="@selectedUserId" />
        }
        else if (activeTab == AdminTabs.UserMangment)
        {
            <UserMangment OnViewShifts="OpenUserShifts" />
        }
    </main>
</div>
@code {
    private int? selectedUserId;

    private enum AdminTabs
    {
        UsersRequst,
        ShiftsRequst,
        UserMangment,
    }

    private AdminTabs activeTab = AdminTabs.UsersRequst;

    private void SetActiveTab(AdminTabs tab)
    {
        activeTab = tab;
    }

    private void OpenUserShifts(int userId)
    {
        selectedUserId = userId;
        activeTab = AdminTabs.ShiftsRequst;
    }
}
